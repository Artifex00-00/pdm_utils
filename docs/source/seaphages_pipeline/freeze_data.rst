Freeze databases
================

The primary PhameratorDB instance, Actino_Draft, contains all available actinobacteriophage data, including draft and final annotations, and is routinely updated and modified. However, research projects may require a version of the database that contains no draft genomes, that is no longer routinely modified/updated, and that has a unique identifier from other database versions or instances. In order to create these “frozen” databases, the freeze_database.py script was created, which requires two arguments [Table 13].

The script copies the database indicated in the first script argument, deletes all data pertaining to draft genomes (and thus retains all final and unknown genomes), and saves the new database with a unique identifier that indicates both the type of phage database and the number of genomes (e.g. Actinobacteriophage_[0123], where [0123] is an integer). The script creates a folder for this new database in the directory indicated by the second script argument, and creates three subfolders (current, backup, and updates_history) analogous to the folders regularly used to maintain the Actino_Draft instance. Since the new frozen database no longer contains draft genomes, gene phams need to be recomputed. As a result, the script does not export the new database, and it resets the database version to 0. The k_phamerate.py script can now be executed on this new database, and the export_database.py script can be used to increment the version to 1 and upload it to the server. Since it has a unique name, it will not overwrite other databases stored in the local computer or on the server.

Different types of databases may need to be frozen. For instance, sometimes all actinobacteriophages (other than draft genomes) need to be retained. Other times, only the Mycobacterium phages need to be retained. As a result, the script prompts you to choose an appropriate database name (e.g. Actinobacteriophage, Bacteriophage, Cyanobacteriophage, etc.) before it appends the genome count to the database name. The database administrator can also input a customized database name if needed. However, this script does not yet provide the functionality of enabling the database administrator to indicate which types of phages should be retained (other than the annotation status), and this step currently needs to be completed with the mysql command line utility. It is also important to note that although this database is regarded as “frozen”, it is still able to be modified. Therefore, if minor errors are encountered in the database that need to be modified, the database can be adjusted in MySQL, the version number can be incremented, the database can be re-exported, and the updated database file can overwrite the older file on the server. The script creates the updates_history folder to keep track of tickets specific to this PhameratorDB instance similar to the ticket tracking for Actino_Draft.
