# Below is a history of changes associated with each database schema
# (relative to the prior schema).


# Schema version: 0
# File: Actino_Draft_schema0.sql, Actino_Draft_schema0_updates.sql
# Created: N/A
# Created by: Charles Bowman
# Database derived from: unknown
# The empty schema does not contain CASCADE settings.
# The schema_updates file adds CASCADE settings to the schema.


# Schema version: 1
# File: Actino_Draft_schema1.sql
# Created: 20180620
# Created by: Travis Mavrich
# Database derived from: Actinobacteriophage_789
# No statement record.
# Added CASCADE settings.


# Schema version: 2
# File: Actino_Draft_schema2.sql
# Created: 20180620
# Created by: Travis Mavrich
# Database derived from: Actinobacteriophage_1060
# These improvements were implement over several versions instead of in a
# single step.
# Added phage.RetrieveRecord
# Added phage.AnnotationQC
# Added phage.Program
# Added phage.AnnotationAuthor


# Schema version: 3
# File: Actino_Draft_schema3.sql
# Created: 20180620
# Created by: Travis Mavrich
# Database derived from: Actino_Draft
# These improvements were implement over several versions instead of in a
# single step.
# Added version.schema_version
# Added phage.Cluster2
# Added phage.Subcluster2
# Removed phage.Program


# Schema version: 4
# File: Actino_Draft_schema4.sql
# Created: 20190726
# Created by: Christian Gauthier
# Database derived from: unknown
# No statement record.
# TODO Christian can insert statement record.

# Schema version: 5
# File: Actino_Draft_schema5.sql
# Created: 20191002
# Created by: Travis Mavrich
# Database derived from: Actino_Draft (v310, s4)
UPDATE version SET schema_version = 5;
UPDATE version SET version = 311;
DROP TABLE node;
DROP TABLE host_range;
DROP TABLE host;
DROP TABLE pham_history;
DROP TABLE pham_old;
DROP TABLE scores_summary;
ALTER TABLE phage DROP COLUMN Prophage;
ALTER TABLE phage DROP COLUMN Isolated;
ALTER TABLE phage DROP COLUMN ProphageOffset;
ALTER TABLE phage DROP COLUMN DateLastSearched;
ALTER TABLE phage DROP COLUMN AnnotationQC;
ALTER TABLE gene DROP COLUMN StartCodon;
ALTER TABLE gene DROP COLUMN StopCodon;
ALTER TABLE gene DROP COLUMN GC1;
ALTER TABLE gene DROP COLUMN GC2;
ALTER TABLE gene DROP COLUMN GC3;
ALTER TABLE gene DROP COLUMN GC;
ALTER TABLE gene DROP COLUMN LeftNeighbor;
ALTER TABLE gene DROP COLUMN RightNeighbor;
ALTER TABLE gene DROP COLUMN clustalw_status;
ALTER TABLE gene DROP COLUMN blast_status;
ALTER TABLE gene DROP COLUMN TypeID;
ALTER TABLE pham DROP COLUMN orderAdded;
ALTER TABLE phage MODIFY status varchar(7);
UPDATE phage SET status = 'unknown' WHERE status = 'gbk';
ALTER TABLE phage MODIFY status enum('unknown','draft','final');




# Schema version: 6
# File: Actino_Draft_schema6.sql
# Created: 20191115
# Created by: Travis Mavrich
# Database derived from: Actino_Draft (v322, s5)
UPDATE version SET schema_version = 6;
UPDATE version SET version = 323;
ALTER TABLE domain CHANGE id ID int(10) unsigned NOT NULL AUTO_INCREMENT;
ALTER TABLE domain CHANGE description Description blob;
ALTER TABLE gene_domain CHANGE id ID int(10) unsigned NOT NULL AUTO_INCREMENT;
ALTER TABLE gene_domain CHANGE expect Expect double unsigned NOT NULL;
ALTER TABLE phage CHANGE status Status enum('unknown','draft','final') DEFAULT NULL;
ALTER TABLE pham CHANGE name Name int(10) unsigned DEFAULT NULL;
ALTER TABLE pham_color CHANGE id ID int(10) unsigned NOT NULL AUTO_INCREMENT;
ALTER TABLE pham_color CHANGE name Name int(10) unsigned NOT NULL;
ALTER TABLE pham_color CHANGE color Color char(7) NOT NULL;
ALTER TABLE version CHANGE version Version int(11) unsigned NOT NULL;
ALTER TABLE gene CHANGE translation Translation varchar(5000) DEFAULT NULL;
ALTER TABLE gene CHANGE id ID int(10) unsigned NOT NULL AUTO_INCREMENT;
ALTER TABLE gene CHANGE cdd_status DomainStatus tinyint(1) NOT NULL DEFAULT '0';
ALTER TABLE version CHANGE schema_version SchemaVersion int(11) unsigned NOT NULL;
ALTER TABLE domain CHANGE hit_id HitID varchar(25) NOT NULL;
ALTER TABLE gene_domain CHANGE hit_id HitID varchar(25) NOT NULL;
ALTER TABLE gene_domain CHANGE query_start QueryStart int(10) unsigned NOT NULL;
ALTER TABLE gene_domain CHANGE query_end QueryEnd int(10) unsigned NOT NULL;
