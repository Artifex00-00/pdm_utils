# Below is a history of changes associated with each database schema
# (relative to the prior schema).


# Schema version: 0
# File: Actino_Draft_schema0.sql, Actino_Draft_schema0_updates.sql
# Created: N/A
# Created by: Charles Bowman
# Database derived from: unknown
# The empty schema does not contain CASCADE settings.
# The schema_updates file adds CASCADE settings to the schema.


# Schema version: 1
# File: Actino_Draft_schema1.sql
# Created: 20180620
# Created by: Travis Mavrich
# Database derived from: Actinobacteriophage_789
# No statement record.
# Contains CASCADE settings.


# Schema version: 2
# File: Actino_Draft_schema2.sql
# Created: 20180620
# Created by: Travis Mavrich
# Database derived from: Actinobacteriophage_1060
# No statement record.
# Added phage.RetrieveRecord
# Added phage.AnnotationQC
# Added phage.Program
# Added phage.AnnotationAuthor


# Schema version: 3
# File: Actino_Draft_schema3.sql
# Created: 20180620
# Created by: Travis Mavrich
# Database derived from: Actino_Draft
# No statement record.
# Added version.schema_version
# Added phage.Cluster2
# Added phage.Subcluster2
# Removed phage.Program


# Schema version: 4
# File: Actino_Draft_schema4.sql
# Created: 20190726
# Created by: Christian Gauthier
# Database derived from: unknown
# No statement record.
# TODO Christian can insert statement record.

# Schema version: 5
# File: Actino_Draft_schema5.sql
# Created: 20191002
# Created by: Travis Mavrich
# Database derived from: Actino_Draft (v310, s4)
UPDATE version SET schema_version = 5;
UPDATE version SET version = 311;
DROP TABLE node;
DROP TABLE host_range;
DROP TABLE host;
DROP TABLE pham_history;
DROP TABLE pham_old;
DROP TABLE scores_summary;
ALTER TABLE phage DROP COLUMN Prophage;
ALTER TABLE phage DROP COLUMN Isolated;
ALTER TABLE phage DROP COLUMN ProphageOffset;
ALTER TABLE phage DROP COLUMN DateLastSearched;
ALTER TABLE phage DROP COLUMN AnnotationQC;
ALTER TABLE gene DROP COLUMN StartCodon;
ALTER TABLE gene DROP COLUMN StopCodon;
ALTER TABLE gene DROP COLUMN GC1;
ALTER TABLE gene DROP COLUMN GC2;
ALTER TABLE gene DROP COLUMN GC3;
ALTER TABLE gene DROP COLUMN GC;
ALTER TABLE gene DROP COLUMN LeftNeighbor;
ALTER TABLE gene DROP COLUMN RightNeighbor;
ALTER TABLE gene DROP COLUMN clustalw_status;
ALTER TABLE gene DROP COLUMN blast_status;
ALTER TABLE gene DROP COLUMN TypeID;
ALTER TABLE pham DROP COLUMN orderAdded;
ALTER TABLE phage MODIFY status varchar(7);
UPDATE phage SET status = 'unknown' WHERE status = 'gbk';
ALTER TABLE phage MODIFY status enum('unknown','draft','final');
